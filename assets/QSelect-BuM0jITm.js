import{b as $t,h as ct,g as Kt,d as jt,u as pl,e as Vl,f as Vt,i as El}from"./use-key-composition-B4KWYnSM.js";import{c as ke,a as m,h as x,d as Ye,as as Bl,g as He,at as Tl,r as F,x as dt,a3 as ce,f as Al,aa as fe,w as ie,au as _l,Y as rt,o as Re,av as Nt,aw as Et,n as Se,ax as zl,a4 as de,ay as Fl,ag as Ol,z as Ll,y as Ml,s as Pl,az as Le,af as Il,ac as lt,aA as Hl,aB as Rl,N as Dl,a9 as Te,m as $l}from"./index-DX0maaL-.js";import{f as Wt,s as Kl,v as jl,h as Bt,i as Qt,j as Ut,x as Nl,u as Xt,l as Yt,m as Wl,n as Ql,o as Gt,q as Jt,p as Tt,r as Ul,t as At,g as Xl,y as Yl,w as Gl,b as Jl,a as Zl,z as en,Q as tn}from"./QChip-CfgR1eIm.js";import{u as Zt,a as el,b as tl}from"./use-timeout-COPk73-K.js";import{a as ll}from"./focus-manager-zjdVGI5d.js";const ln=ke({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:n}){const o=m(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>x("div",{class:o.value},Ye(n.default))}}),nn=ke({name:"QItem",props:{...Zt,...Bl,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:n,emit:o}){const{proxy:{$q:d}}=He(),g=el(e,d),{hasLink:i,linkAttrs:b,linkClass:y,linkTag:S,navigateOnClick:V}=Tl(),f=F(null),h=F(null),k=m(()=>e.clickable===!0||i.value===!0||e.tag==="label"),p=m(()=>e.disable!==!0&&k.value===!0),_=m(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(g.value===!0?" q-item--dark":"")+(i.value===!0&&e.active===null?y.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(p.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),R=m(()=>e.insetLevel===void 0?null:{["padding"+(d.lang.rtl===!0?"Right":"Left")]:16+e.insetLevel*56+"px"});function L(q){p.value===!0&&(h.value!==null&&q.qAvoidFocus!==!0&&(q.qKeyEvent!==!0&&document.activeElement===f.value?h.value.focus():document.activeElement===h.value&&f.value.focus()),V(q))}function $(q){if(p.value===!0&&dt(q,[13,32])===!0){ce(q),q.qKeyEvent=!0;const B=new MouseEvent("click",q);B.qKeyEvent=!0,f.value.dispatchEvent(B)}o("keyup",q)}function j(){const q=Al(n.default,[]);return p.value===!0&&q.unshift(x("div",{class:"q-focus-helper",tabindex:-1,ref:h})),q}return()=>{const q={ref:f,class:_.value,style:R.value,role:"listitem",onClick:L,onKeyup:$};return p.value===!0?(q.tabindex=e.tabindex||"0",Object.assign(q,b.value)):k.value===!0&&(q["aria-disabled"]="true"),x(S.value,q,j())}}}),be=[];let _e;function on(e){_e=e.keyCode===27}function un(){_e===!0&&(_e=!1)}function an(e){_e===!0&&(_e=!1,dt(e,27)===!0&&be[be.length-1](e))}function nl(e){window[e]("keydown",on),window[e]("blur",un),window[e]("keyup",an),_e=!1}function ol(e){fe.is.desktop===!0&&(be.push(e),be.length===1&&nl("addEventListener"))}function Ue(e){const n=be.indexOf(e);n!==-1&&(be.splice(n,1),be.length===0&&nl("removeEventListener"))}const we=[];function il(e){we[we.length-1](e)}function ul(e){fe.is.desktop===!0&&(we.push(e),we.length===1&&document.body.addEventListener("focusin",il))}function st(e){const n=we.indexOf(e);n!==-1&&(we.splice(n,1),we.length===0&&document.body.removeEventListener("focusin",il))}const rn=ke({name:"QMenu",inheritAttrs:!1,props:{...Nl,...Ut,...Zt,...Qt,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Bt},self:{type:String,validator:Bt},offset:{type:Array,validator:jl},scrollTarget:Kl,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Wt,"click","escapeKey"],setup(e,{slots:n,emit:o,attrs:d}){let g=null,i,b,y;const S=He(),{proxy:V}=S,{$q:f}=V,h=F(null),k=F(!1),p=m(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),_=el(e,f),{registerTick:R,removeTick:L}=Xt(),{registerTimeout:$}=tl(),{transitionProps:j,transitionStyle:q}=Yt(e),{localScrollTarget:B,changeScrollEvent:ue,unconfigureScrollTarget:I}=Wl(e,w),{anchorEl:K,canShow:N}=Ql({showing:k}),{hide:ee}=Gt({showing:k,canShow:N,handleShow:le,handleHide:l,hideOnRouteChange:p,processOnMount:!0}),{showPortal:X,hidePortal:ae,renderPortal:H}=Jt(S,h,T,"menu"),G={anchorEl:K,innerRef:h,onClickOutside(u){if(e.persistent!==!0&&k.value===!0)return ee(u),(u.type==="touchstart"||u.target.classList.contains("q-dialog__backdrop"))&&ce(u),!0}},re=m(()=>Tt(e.anchor||(e.cover===!0?"center middle":"bottom start"),f.lang.rtl)),te=m(()=>e.cover===!0?re.value:Tt(e.self||"top start",f.lang.rtl)),W=m(()=>(e.square===!0?" q-menu--square":"")+(_.value===!0?" q-menu--dark q-dark":"")),J=m(()=>e.autoClose===!0?{onClick:E}:{}),Y=m(()=>k.value===!0&&e.persistent!==!0);ie(Y,u=>{u===!0?(ol(r),Ul(G)):(Ue(r),At(G))});function Q(){ll(()=>{let u=h.value;u&&u.contains(document.activeElement)!==!0&&(u=u.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||u.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||u.querySelector("[autofocus], [data-autofocus]")||u,u.focus({preventScroll:!0}))})}function le(u){if(g=e.noRefocus===!1?document.activeElement:null,ul(O),X(),w(),i=void 0,u!==void 0&&(e.touchPosition||e.contextMenu)){const M=_l(u);if(M.left!==void 0){const{top:ne,left:xe}=K.value.getBoundingClientRect();i={left:M.left-xe,top:M.top-ne}}}b===void 0&&(b=ie(()=>f.screen.width+"|"+f.screen.height+"|"+e.self+"|"+e.anchor+"|"+f.lang.rtl,v)),e.noFocus!==!0&&document.activeElement.blur(),R(()=>{v(),e.noFocus!==!0&&Q()}),$(()=>{f.platform.is.ios===!0&&(y=e.autoClose,h.value.click()),v(),X(!0),o("show",u)},e.transitionDuration)}function l(u){L(),ae(),a(!0),g!==null&&(u===void 0||u.qClickOutside!==!0)&&(((u?.type.indexOf("key")===0?g.closest('[tabindex]:not([tabindex^="-"])'):void 0)||g).focus(),g=null),$(()=>{ae(!0),o("hide",u)},e.transitionDuration)}function a(u){i=void 0,b!==void 0&&(b(),b=void 0),(u===!0||k.value===!0)&&(st(O),I(),At(G),Ue(r)),u!==!0&&(g=null)}function w(){(K.value!==null||e.scrollTarget!==void 0)&&(B.value=Xl(K.value,e.scrollTarget),ue(B.value,v))}function E(u){y!==!0?(Yl(V,u),o("click",u)):y=!1}function O(u){Y.value===!0&&e.noFocus!==!0&&Nt(h.value,u.target)!==!0&&Q()}function r(u){e.noEscDismiss!==!0&&(o("escapeKey"),ee(u))}function v(){Gl({targetEl:h.value,offset:e.offset,anchorEl:K.value,anchorOrigin:re.value,selfOrigin:te.value,absoluteOffset:i,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function T(){return x(rt,j.value,()=>k.value===!0?x("div",{role:"menu",...d,ref:h,tabindex:-1,class:["q-menu q-position-engine scroll"+W.value,d.class],style:[d.style,q.value],...J.value},Ye(n.default)):null)}return Re(a),Object.assign(V,{focus:Q,updatePosition:v}),H}}),sn=ke({name:"QField",inheritAttrs:!1,props:{...ct,tag:{type:String,default:"label"}},emits:$t,setup(){return Kt(jt({tagProp:!0}))}}),cn=ke({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:n}){const o=m(()=>parseInt(e.lines,10)),d=m(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(o.value===1?" ellipsis":"")),g=m(()=>e.lines!==void 0&&o.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":o.value}:null);return()=>x("div",{style:g.value,class:d.value},Ye(n.default))}});function dn(e,n,o){let d;function g(){d!==void 0&&(Et.remove(d),d=void 0)}return Re(()=>{e.value===!0&&g()}),{removeFromHistory:g,addToHistory(){d={condition:()=>o.value===!0,handler:n},Et.add(d)}}}let Me=0,nt,ot,Ie,it=!1,_t,zt,Ft,ye=null;function fn(e){vn(e)&&ce(e)}function vn(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const n=zl(e),o=e.shiftKey&&!e.deltaX,d=!o&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),g=o||d?e.deltaY:e.deltaX;for(let i=0;i<n.length;i++){const b=n[i];if(en(b,d))return d?g<0&&b.scrollTop===0?!0:g>0&&b.scrollTop+b.clientHeight===b.scrollHeight:g<0&&b.scrollLeft===0?!0:g>0&&b.scrollLeft+b.clientWidth===b.scrollWidth}return!0}function Ot(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function We(e){it!==!0&&(it=!0,requestAnimationFrame(()=>{it=!1;const{height:n}=e.target,{clientHeight:o,scrollTop:d}=document.scrollingElement;(Ie===void 0||n!==window.innerHeight)&&(Ie=o-n,document.scrollingElement.scrollTop=d),d>Ie&&(document.scrollingElement.scrollTop-=Math.ceil((d-Ie)/8))}))}function Lt(e){const n=document.body,o=window.visualViewport!==void 0;if(e==="add"){const{overflowY:d,overflowX:g}=window.getComputedStyle(n);nt=Jl(window),ot=Zl(window),_t=n.style.left,zt=n.style.top,Ft=window.location.href,n.style.left=`-${nt}px`,n.style.top=`-${ot}px`,g!=="hidden"&&(g==="scroll"||n.scrollWidth>window.innerWidth)&&n.classList.add("q-body--force-scrollbar-x"),d!=="hidden"&&(d==="scroll"||n.scrollHeight>window.innerHeight)&&n.classList.add("q-body--force-scrollbar-y"),n.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,fe.is.ios===!0&&(o===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",We,Se.passiveCapture),window.visualViewport.addEventListener("scroll",We,Se.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",Ot,Se.passiveCapture))}fe.is.desktop===!0&&fe.is.mac===!0&&window[`${e}EventListener`]("wheel",fn,Se.notPassive),e==="remove"&&(fe.is.ios===!0&&(o===!0?(window.visualViewport.removeEventListener("resize",We,Se.passiveCapture),window.visualViewport.removeEventListener("scroll",We,Se.passiveCapture)):window.removeEventListener("scroll",Ot,Se.passiveCapture)),n.classList.remove("q-body--prevent-scroll"),n.classList.remove("q-body--force-scrollbar-x"),n.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,n.style.left=_t,n.style.top=zt,window.location.href===Ft&&window.scrollTo(nt,ot),Ie=void 0)}function mn(e){let n="add";if(e===!0){if(Me++,ye!==null){clearTimeout(ye),ye=null;return}if(Me>1)return}else{if(Me===0||(Me--,Me>0))return;if(n="remove",fe.is.ios===!0&&fe.is.nativeMobile===!0){ye!==null&&clearTimeout(ye),ye=setTimeout(()=>{Lt(n),ye=null},100);return}}Lt(n)}function gn(){let e;return{preventBodyScroll(n){n!==e&&(e!==void 0||n===!0)&&(e=n,mn(n))}}}let Qe=0;const hn={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},Mt={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]},Sn=ke({name:"QDialog",inheritAttrs:!1,props:{...Ut,...Qt,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:e=>["standard","top","bottom","left","right"].includes(e)}},emits:[...Wt,"shake","click","escapeKey"],setup(e,{slots:n,emit:o,attrs:d}){const g=He(),i=F(null),b=F(!1),y=F(!1);let S=null,V=null,f,h;const k=m(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:p}=gn(),{registerTimeout:_}=tl(),{registerTick:R,removeTick:L}=Xt(),{transitionProps:$,transitionStyle:j}=Yt(e,()=>Mt[e.position][0],()=>Mt[e.position][1]),q=m(()=>j.value+(e.backdropFilter!==void 0?`;backdrop-filter:${e.backdropFilter};-webkit-backdrop-filter:${e.backdropFilter}`:"")),{showPortal:B,hidePortal:ue,portalIsAccessible:I,renderPortal:K}=Jt(g,i,O,"dialog"),{hide:N}=Gt({showing:b,hideOnRouteChange:k,handleShow:te,handleHide:W,processOnMount:!0}),{addToHistory:ee,removeFromHistory:X}=dn(b,N,k),ae=m(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${hn[e.position]}`+(y.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),H=m(()=>b.value===!0&&e.seamless!==!0),G=m(()=>e.autoClose===!0?{onClick:a}:{}),re=m(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${H.value===!0?"modal":"seamless"}`,d.class]);ie(()=>e.maximized,r=>{b.value===!0&&l(r)}),ie(H,r=>{p(r),r===!0?(ul(E),ol(Q)):(st(E),Ue(Q))});function te(r){ee(),V=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,l(e.maximized),B(),y.value=!0,e.noFocus!==!0?(document.activeElement?.blur(),R(J)):L(),_(()=>{if(g.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:v,bottom:T}=document.activeElement.getBoundingClientRect(),{innerHeight:u}=window,M=window.visualViewport!==void 0?window.visualViewport.height:u;v>0&&T>M/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-M,T>=u?1/0:Math.ceil(document.scrollingElement.scrollTop+T-M/2))),document.activeElement.scrollIntoView()}h=!0,i.value.click(),h=!1}B(!0),y.value=!1,o("show",r)},e.transitionDuration)}function W(r){L(),X(),le(!0),y.value=!0,ue(),V!==null&&(((r?.type.indexOf("key")===0?V.closest('[tabindex]:not([tabindex^="-"])'):void 0)||V).focus(),V=null),_(()=>{ue(!0),y.value=!1,o("hide",r)},e.transitionDuration)}function J(r){ll(()=>{let v=i.value;if(v!==null){if(r!==void 0){const T=v.querySelector(r);if(T!==null){T.focus({preventScroll:!0});return}}v.contains(document.activeElement)!==!0&&(v=v.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||v.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||v.querySelector("[autofocus], [data-autofocus]")||v,v.focus({preventScroll:!0}))}})}function Y(r){r&&typeof r.focus=="function"?r.focus({preventScroll:!0}):J(),o("shake");const v=i.value;v!==null&&(v.classList.remove("q-animate--scale"),v.classList.add("q-animate--scale"),S!==null&&clearTimeout(S),S=setTimeout(()=>{S=null,i.value!==null&&(v.classList.remove("q-animate--scale"),J())},170))}function Q(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&Y():(o("escapeKey"),N()))}function le(r){S!==null&&(clearTimeout(S),S=null),(r===!0||b.value===!0)&&(l(!1),e.seamless!==!0&&(p(!1),st(E),Ue(Q))),r!==!0&&(V=null)}function l(r){r===!0?f!==!0&&(Qe<1&&document.body.classList.add("q-body--dialog"),Qe++,f=!0):f===!0&&(Qe<2&&document.body.classList.remove("q-body--dialog"),Qe--,f=!1)}function a(r){h!==!0&&(N(r),o("click",r))}function w(r){e.persistent!==!0&&e.noBackdropDismiss!==!0?N(r):e.noShake!==!0&&Y()}function E(r){e.allowFocusOutside!==!0&&I.value===!0&&Nt(i.value,r.target)!==!0&&J('[tabindex]:not([tabindex="-1"])')}Object.assign(g.proxy,{focus:J,shake:Y,__updateRefocusTarget(r){V=r||null}}),Re(le);function O(){return x("div",{role:"dialog","aria-modal":H.value===!0?"true":"false",...d,class:re.value},[x(rt,{name:"q-transition--fade",appear:!0},()=>H.value===!0?x("div",{class:"q-dialog__backdrop fixed-full",style:q.value,"aria-hidden":"true",tabindex:-1,onClick:w}):null),x(rt,$.value,()=>b.value===!0?x("div",{ref:i,class:ae.value,style:j.value,tabindex:-1,...G.value},Ye(n.default)):null)])}return K}});let Xe=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const n=document.createElement("div");Object.assign(n.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(n),e.scrollLeft=-1e3,Xe=e.scrollLeft>=0,e.remove()}const Z=1e3,yn=["start","center","end","start-force","center-force","end-force"],al=Array.prototype.filter,bn=window.getComputedStyle(document.body).overflowAnchor===void 0?Pl:function(e,n){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const o=e.children||[];al.call(o,g=>g.dataset&&g.dataset.qVsAnchor!==void 0).forEach(g=>{delete g.dataset.qVsAnchor});const d=o[n];d?.dataset&&(d.dataset.qVsAnchor="")}))};function Ae(e,n){return e+n}function ut(e,n,o,d,g,i,b,y){const S=e===window?document.scrollingElement||document.documentElement:e,V=g===!0?"offsetWidth":"offsetHeight",f={scrollStart:0,scrollViewSize:-b-y,scrollMaxSize:0,offsetStart:-b,offsetEnd:-y};if(g===!0?(e===window?(f.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,f.scrollViewSize+=document.documentElement.clientWidth):(f.scrollStart=S.scrollLeft,f.scrollViewSize+=S.clientWidth),f.scrollMaxSize=S.scrollWidth,i===!0&&(f.scrollStart=(Xe===!0?f.scrollMaxSize-f.scrollViewSize:0)-f.scrollStart)):(e===window?(f.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,f.scrollViewSize+=document.documentElement.clientHeight):(f.scrollStart=S.scrollTop,f.scrollViewSize+=S.clientHeight),f.scrollMaxSize=S.scrollHeight),o!==null)for(let h=o.previousElementSibling;h!==null;h=h.previousElementSibling)h.classList.contains("q-virtual-scroll--skip")===!1&&(f.offsetStart+=h[V]);if(d!==null)for(let h=d.nextElementSibling;h!==null;h=h.nextElementSibling)h.classList.contains("q-virtual-scroll--skip")===!1&&(f.offsetEnd+=h[V]);if(n!==e){const h=S.getBoundingClientRect(),k=n.getBoundingClientRect();g===!0?(f.offsetStart+=k.left-h.left,f.offsetEnd-=k.width):(f.offsetStart+=k.top-h.top,f.offsetEnd-=k.height),e!==window&&(f.offsetStart+=f.scrollStart),f.offsetEnd+=f.scrollMaxSize-f.offsetStart}return f}function Pt(e,n,o,d){n==="end"&&(n=(e===window?document.body:e)[o===!0?"scrollWidth":"scrollHeight"]),e===window?o===!0?(d===!0&&(n=(Xe===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-n),window.scrollTo(n,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,n):o===!0?(d===!0&&(n=(Xe===!0?e.scrollWidth-e.offsetWidth:0)-n),e.scrollLeft=n):e.scrollTop=n}function Pe(e,n,o,d){if(o>=d)return 0;const g=n.length,i=Math.floor(o/Z),b=Math.floor((d-1)/Z)+1;let y=e.slice(i,b).reduce(Ae,0);return o%Z!==0&&(y-=n.slice(i*Z,o).reduce(Ae,0)),d%Z!==0&&d!==g&&(y-=n.slice(d,b*Z).reduce(Ae,0)),y}const rl={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Bn=Object.keys(rl),It={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...rl};function wn({virtualScrollLength:e,getVirtualScrollTarget:n,getVirtualScrollEl:o,virtualScrollItemSizeComputed:d}){const g=He(),{props:i,emit:b,proxy:y}=g,{$q:S}=y;let V,f,h,k=[],p;const _=F(0),R=F(0),L=F({}),$=F(null),j=F(null),q=F(null),B=F({from:0,to:0}),ue=m(()=>i.tableColspan!==void 0?i.tableColspan:100);d===void 0&&(d=m(()=>i.virtualScrollItemSize));const I=m(()=>d.value+";"+i.virtualScrollHorizontal),K=m(()=>I.value+";"+i.virtualScrollSliceRatioBefore+";"+i.virtualScrollSliceRatioAfter);ie(K,()=>{W()}),ie(I,N);function N(){te(f,!0)}function ee(l){te(l===void 0?f:l)}function X(l,a){const w=n();if(w==null||w.nodeType===8)return;const E=ut(w,o(),$.value,j.value,i.virtualScrollHorizontal,S.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd);h!==E.scrollViewSize&&W(E.scrollViewSize),H(w,E,Math.min(e.value-1,Math.max(0,parseInt(l,10)||0)),0,yn.indexOf(a)!==-1?a:f!==-1&&l>f?"end":"start")}function ae(){const l=n();if(l==null||l.nodeType===8)return;const a=ut(l,o(),$.value,j.value,i.virtualScrollHorizontal,S.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd),w=e.value-1,E=a.scrollMaxSize-a.offsetStart-a.offsetEnd-R.value;if(V===a.scrollStart)return;if(a.scrollMaxSize<=0){H(l,a,0,0);return}h!==a.scrollViewSize&&W(a.scrollViewSize),G(B.value.from);const O=Math.floor(a.scrollMaxSize-Math.max(a.scrollViewSize,a.offsetEnd)-Math.min(p[w],a.scrollViewSize/2));if(O>0&&Math.ceil(a.scrollStart)>=O){H(l,a,w,a.scrollMaxSize-a.offsetEnd-k.reduce(Ae,0));return}let r=0,v=a.scrollStart-a.offsetStart,T=v;if(v<=E&&v+a.scrollViewSize>=_.value)v-=_.value,r=B.value.from,T=v;else for(let u=0;v>=k[u]&&r<w;u++)v-=k[u],r+=Z;for(;v>0&&r<w;)v-=p[r],v>-a.scrollViewSize?(r++,T=v):T=p[r]+v;H(l,a,r,T)}function H(l,a,w,E,O){const r=typeof O=="string"&&O.indexOf("-force")!==-1,v=r===!0?O.replace("-force",""):O,T=v!==void 0?v:"start";let u=Math.max(0,w-L.value[T]),M=u+L.value.total;M>e.value&&(M=e.value,u=Math.max(0,M-L.value.total)),V=a.scrollStart;const ne=u!==B.value.from||M!==B.value.to;if(ne===!1&&v===void 0){Y(w);return}const{activeElement:xe}=document,se=q.value;ne===!0&&se!==null&&se!==xe&&se.contains(xe)===!0&&(se.addEventListener("focusout",re),setTimeout(()=>{se?.removeEventListener("focusout",re)})),bn(se,w-u);const De=v!==void 0?p.slice(u,w).reduce(Ae,0):0;if(ne===!0){const ve=M>=B.value.from&&u<=B.value.to?B.value.to:M;B.value={from:u,to:ve},_.value=Pe(k,p,0,u),R.value=Pe(k,p,M,e.value),requestAnimationFrame(()=>{B.value.to!==M&&V===a.scrollStart&&(B.value={from:B.value.from,to:M},R.value=Pe(k,p,M,e.value))})}requestAnimationFrame(()=>{if(V!==a.scrollStart)return;ne===!0&&G(u);const ve=p.slice(u,w).reduce(Ae,0),me=ve+a.offsetStart+_.value,$e=me+p[w];let ze=me+E;if(v!==void 0){const Ge=ve-De,Fe=a.scrollStart+Ge;ze=r!==!0&&Fe<me&&$e<Fe+a.scrollViewSize?Fe:v==="end"?$e-a.scrollViewSize:me-(v==="start"?0:Math.round((a.scrollViewSize-p[w])/2))}V=ze,Pt(l,ze,i.virtualScrollHorizontal,S.lang.rtl),Y(w)})}function G(l){const a=q.value;if(a){const w=al.call(a.children,u=>u.classList&&u.classList.contains("q-virtual-scroll--skip")===!1),E=w.length,O=i.virtualScrollHorizontal===!0?u=>u.getBoundingClientRect().width:u=>u.offsetHeight;let r=l,v,T;for(let u=0;u<E;){for(v=O(w[u]),u++;u<E&&w[u].classList.contains("q-virtual-scroll--with-prev")===!0;)v+=O(w[u]),u++;T=v-p[r],T!==0&&(p[r]+=T,k[Math.floor(r/Z)]+=T),r++}}}function re(){q.value?.focus()}function te(l,a){const w=1*d.value;(a===!0||Array.isArray(p)===!1)&&(p=[]);const E=p.length;p.length=e.value;for(let r=e.value-1;r>=E;r--)p[r]=w;const O=Math.floor((e.value-1)/Z);k=[];for(let r=0;r<=O;r++){let v=0;const T=Math.min((r+1)*Z,e.value);for(let u=r*Z;u<T;u++)v+=p[u];k.push(v)}f=-1,V=void 0,_.value=Pe(k,p,0,B.value.from),R.value=Pe(k,p,B.value.to,e.value),l>=0?(G(B.value.from),de(()=>{X(l)})):Q()}function W(l){if(l===void 0&&typeof window<"u"){const v=n();v!=null&&v.nodeType!==8&&(l=ut(v,o(),$.value,j.value,i.virtualScrollHorizontal,S.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd).scrollViewSize)}h=l;const a=parseFloat(i.virtualScrollSliceRatioBefore)||0,w=parseFloat(i.virtualScrollSliceRatioAfter)||0,E=1+a+w,O=l===void 0||l<=0?1:Math.ceil(l/d.value),r=Math.max(1,O,Math.ceil((i.virtualScrollSliceSize>0?i.virtualScrollSliceSize:10)/E));L.value={total:Math.ceil(r*E),start:Math.ceil(r*a),center:Math.ceil(r*(.5+a)),end:Math.ceil(r*(1+a)),view:O}}function J(l,a){const w=i.virtualScrollHorizontal===!0?"width":"height",E={["--q-virtual-scroll-item-"+w]:d.value+"px"};return[l==="tbody"?x(l,{class:"q-virtual-scroll__padding",key:"before",ref:$},[x("tr",[x("td",{style:{[w]:`${_.value}px`,...E},colspan:ue.value})])]):x(l,{class:"q-virtual-scroll__padding",key:"before",ref:$,style:{[w]:`${_.value}px`,...E}}),x(l,{class:"q-virtual-scroll__content",key:"content",ref:q,tabindex:-1},a.flat()),l==="tbody"?x(l,{class:"q-virtual-scroll__padding",key:"after",ref:j},[x("tr",[x("td",{style:{[w]:`${R.value}px`,...E},colspan:ue.value})])]):x(l,{class:"q-virtual-scroll__padding",key:"after",ref:j,style:{[w]:`${R.value}px`,...E}})]}function Y(l){f!==l&&(i.onVirtualScroll!==void 0&&b("virtualScroll",{index:l,from:B.value.from,to:B.value.to-1,direction:l<f?"decrease":"increase",ref:y}),f=l)}W();const Q=Fl(ae,S.platform.is.ios===!0?120:35);Ol(()=>{W()});let le=!1;return Ll(()=>{le=!0}),Ml(()=>{if(le!==!0)return;const l=n();V!==void 0&&l!==void 0&&l!==null&&l.nodeType!==8?Pt(l,V,i.virtualScrollHorizontal,S.lang.rtl):X(f)}),Re(()=>{Q.cancel()}),Object.assign(y,{scrollTo:X,reset:N,refresh:ee}),{virtualScrollSliceRange:B,virtualScrollSliceSizeComputed:L,setVirtualScrollSize:W,onVirtualScrollEvt:Q,localResetVirtualScroll:te,padVirtualScroll:J,scrollTo:X,reset:N,refresh:ee}}const Ht=["B","KB","MB","GB","TB","PB"];function Tn(e,n=1){let o=0;for(;parseInt(e,10)>=1024&&o<Ht.length-1;)e/=1024,++o;return`${e.toFixed(n)}${Ht[o]}`}function Rt(e,n,o){if(o<=n)return n;const d=o-n+1;let g=n+(e-n)%d;return g<n&&(g=d+g),g===0?0:g}const Dt=e=>["add","add-unique","toggle"].includes(e),kn=".*+?^${}()|[]\\",xn=Object.keys(ct);function at(e,n){if(typeof e=="function")return e;const o=e!==void 0?e:n;return d=>d!==null&&typeof d=="object"&&o in d?d[o]:d}const An=ke({name:"QSelect",inheritAttrs:!1,props:{...It,...pl,...ct,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Dt},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:It.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...$t,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:n,emit:o}){const{proxy:d}=He(),{$q:g}=d,i=F(!1),b=F(!1),y=F(-1),S=F(""),V=F(!1),f=F(!1);let h=null,k=null,p,_,R,L=null,$,j,q,B;const ue=F(null),I=F(null),K=F(null),N=F(null),ee=F(null),X=Vl(e),ae=El(kt),H=m(()=>Array.isArray(e.options)?e.options.length:0),G=m(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:re,virtualScrollSliceSizeComputed:te,localResetVirtualScroll:W,padVirtualScroll:J,onVirtualScrollEvt:Y,scrollTo:Q,setVirtualScrollSize:le}=wn({virtualScrollLength:H,getVirtualScrollTarget:fl,getVirtualScrollEl:bt,virtualScrollItemSizeComputed:G}),l=jt(),a=m(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,s=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const c=e.mapOptions===!0&&p!==void 0?p:[],C=s.map(z=>dl(z,c));return e.modelValue===null&&t===!0?C.filter(z=>z!==null):C}return s}),w=m(()=>{const t={};return xn.forEach(s=>{const c=e[s];c!==void 0&&(t[s]=c)}),t}),E=m(()=>e.optionsDark===null?l.isDark.value:e.optionsDark),O=m(()=>Vt(a.value)),r=m(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||a.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),v=m(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),T=m(()=>H.value===0),u=m(()=>a.value.map(t=>U.value(t)).join(", ")),M=m(()=>e.displayValue!==void 0?e.displayValue:u.value),ne=m(()=>e.optionsHtml===!0?()=>!0:t=>t?.html===!0),xe=m(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||a.value.some(ne.value))),se=m(()=>l.focused.value===!0?e.tabindex:-1),De=m(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":i.value===!0?"true":"false","aria-controls":`${l.targetUid.value}_lb`};return y.value>=0&&(t["aria-activedescendant"]=`${l.targetUid.value}_${y.value}`),t}),ve=m(()=>({id:`${l.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),me=m(()=>a.value.map((t,s)=>({index:s,opt:t,html:ne.value(t),selected:!0,removeAtIndex:cl,toggleOption:ge,tabindex:se.value}))),$e=m(()=>{if(H.value===0)return[];const{from:t,to:s}=re.value;return e.options.slice(t,s).map((c,C)=>{const z=Ce.value(c)===!0,A=Ze(c)===!0,D=t+C,P={clickable:!0,active:A,activeClass:Fe.value,manualFocus:!0,focused:!1,disable:z,tabindex:-1,dense:e.optionsDense,dark:E.value,role:"option","aria-selected":A===!0?"true":"false",id:`${l.targetUid.value}_${D}`,onClick:()=>{ge(c)}};return z!==!0&&(y.value===D&&(P.focused=!0),g.platform.is.desktop===!0&&(P.onMousemove=()=>{i.value===!0&&qe(D)})),{index:D,opt:c,html:ne.value(c),label:U.value(c),selected:P.active,focused:P.focused,toggleOption:ge,setOptionIndex:qe,itemProps:P}})}),ze=m(()=>e.dropdownIcon!==void 0?e.dropdownIcon:g.iconSet.arrow.dropdown),Ge=m(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Fe=m(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),oe=m(()=>at(e.optionValue,"value")),U=m(()=>at(e.optionLabel,"label")),Ce=m(()=>at(e.optionDisable,"disable")),Ke=m(()=>a.value.map(oe.value)),sl=m(()=>{const t={onInput:kt,onChange:ae,onKeydown:yt,onKeyup:ht,onKeypress:St,onFocus:mt,onClick(s){_===!0&&Te(s)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=ae,t});ie(a,t=>{p=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&l.innerLoading.value!==!0&&(b.value!==!0&&i.value!==!0||O.value!==!0)&&(R!==!0&&Be(),(b.value===!0||i.value===!0)&&pe(""))},{immediate:!0}),ie(()=>e.fillInput,Be),ie(i,et),ie(H,ql);function ft(t){return e.emitValue===!0?oe.value(t):t}function Je(t){if(t!==-1&&t<a.value.length)if(e.multiple===!0){const s=e.modelValue.slice();o("remove",{index:t,value:s.splice(t,1)[0]}),o("update:modelValue",s)}else o("update:modelValue",null)}function cl(t){Je(t),l.focus()}function vt(t,s){const c=ft(t);if(e.multiple!==!0){e.fillInput===!0&&Oe(U.value(t),!0,!0),o("update:modelValue",c);return}if(a.value.length===0){o("add",{index:0,value:c}),o("update:modelValue",e.multiple===!0?[c]:c);return}if(s===!0&&Ze(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const C=e.modelValue.slice();o("add",{index:C.length,value:c}),C.push(c),o("update:modelValue",C)}function ge(t,s){if(l.editable.value!==!0||t===void 0||Ce.value(t)===!0)return;const c=oe.value(t);if(e.multiple!==!0){s!==!0&&(Oe(e.fillInput===!0?U.value(t):"",!0,!0),he()),I.value?.focus(),(a.value.length===0||Le(oe.value(a.value[0]),c)!==!0)&&o("update:modelValue",e.emitValue===!0?c:t);return}if((_!==!0||V.value===!0)&&l.focus(),mt(),a.value.length===0){const A=e.emitValue===!0?c:t;o("add",{index:0,value:A}),o("update:modelValue",e.multiple===!0?[A]:A);return}const C=e.modelValue.slice(),z=Ke.value.findIndex(A=>Le(A,c));if(z!==-1)o("remove",{index:z,value:C.splice(z,1)[0]});else{if(e.maxValues!==void 0&&C.length>=e.maxValues)return;const A=e.emitValue===!0?c:t;o("add",{index:C.length,value:A}),C.push(A)}o("update:modelValue",C)}function qe(t){if(g.platform.is.desktop!==!0)return;const s=t!==-1&&t<H.value?t:-1;y.value!==s&&(y.value=s)}function je(t=1,s){if(i.value===!0){let c=y.value;do c=Rt(c+t,-1,H.value-1);while(c!==-1&&c!==y.value&&Ce.value(e.options[c])===!0);y.value!==c&&(qe(c),Q(c),s!==!0&&e.useInput===!0&&e.fillInput===!0&&Ne(c>=0?U.value(e.options[c]):$,!0))}}function dl(t,s){const c=C=>Le(oe.value(C),t);return e.options.find(c)||s.find(c)||t}function Ze(t){const s=oe.value(t);return Ke.value.find(c=>Le(c,s))!==void 0}function mt(t){e.useInput===!0&&I.value!==null&&(t===void 0||I.value===t.target&&t.target.value===u.value)&&I.value.select()}function gt(t){dt(t,27)===!0&&i.value===!0&&(Te(t),he(),Be()),o("keyup",t)}function ht(t){const{value:s}=t.target;if(t.keyCode!==void 0){gt(t);return}if(t.target.value="",h!==null&&(clearTimeout(h),h=null),k!==null&&(clearTimeout(k),k=null),Be(),typeof s=="string"&&s.length!==0){const c=s.toLocaleLowerCase(),C=A=>{const D=e.options.find(P=>String(A.value(P)).toLocaleLowerCase()===c);return D===void 0?!1:(a.value.indexOf(D)===-1?ge(D):he(),!0)},z=A=>{C(oe)!==!0&&A!==!0&&C(U)!==!0&&pe(s,!0,()=>z(!0))};z()}else l.clearValue(t)}function St(t){o("keypress",t)}function yt(t){if(o("keydown",t),Il(t)===!0)return;const s=S.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),c=t.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(y.value!==-1||s===!0);if(t.keyCode===27){lt(t);return}if(t.keyCode===9&&c===!1){Ve();return}if(t.target===void 0||t.target.id!==l.targetUid.value||l.editable.value!==!0)return;if(t.keyCode===40&&l.innerLoading.value!==!0&&i.value===!1){ce(t),Ee();return}if(t.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&S.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Je(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&o("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof S.value!="string"||S.value.length===0)&&(ce(t),y.value=-1,je(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&te.value!==void 0&&(ce(t),y.value=Math.max(-1,Math.min(H.value,y.value+(t.keyCode===33?-1:1)*te.value.view)),je(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(ce(t),je(t.keyCode===38?-1:1,e.multiple));const C=H.value;if((q===void 0||B<Date.now())&&(q=""),C>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||q.length!==0)){i.value!==!0&&Ee(t);const z=t.key.toLocaleLowerCase(),A=q.length===1&&q[0]===z;B=Date.now()+1500,A===!1&&(ce(t),q+=z);const D=new RegExp("^"+q.split("").map(tt=>kn.indexOf(tt)!==-1?"\\"+tt:tt).join(".*"),"i");let P=y.value;if(A===!0||P<0||D.test(U.value(e.options[P]))!==!0)do P=Rt(P+1,-1,C-1);while(P!==y.value&&(Ce.value(e.options[P])===!0||D.test(U.value(e.options[P]))!==!0));y.value!==P&&de(()=>{qe(P),Q(P),P>=0&&e.useInput===!0&&e.fillInput===!0&&Ne(U.value(e.options[P]),!0)});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||q!=="")&&(t.keyCode!==9||c===!1))){if(t.keyCode!==9&&ce(t),y.value!==-1&&y.value<C){ge(e.options[y.value]);return}if(s===!0){const z=(A,D)=>{if(D){if(Dt(D)!==!0)return}else D=e.newValueMode;if(Oe("",e.multiple!==!0,!0),A==null)return;(D==="toggle"?ge:vt)(A,D==="add-unique"),e.multiple!==!0&&(I.value?.focus(),he())};if(e.onNewValue!==void 0?o("newValue",S.value,z):z(S.value),e.multiple!==!0)return}i.value===!0?Ve():l.innerLoading.value!==!0&&Ee()}}function bt(){return _===!0?ee.value:K.value!==null&&K.value.contentEl!==null?K.value.contentEl:void 0}function fl(){return bt()}function vl(){return e.hideSelected===!0?[]:n["selected-item"]!==void 0?me.value.map(t=>n["selected-item"](t)).slice():n.selected!==void 0?[].concat(n.selected()):e.useChips===!0?me.value.map((t,s)=>x(tn,{key:"option-"+s,removable:l.editable.value===!0&&Ce.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:se.value,onRemove(){t.removeAtIndex(s)}},()=>x("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:U.value(t.opt)}))):[x("span",{class:"ellipsis",[xe.value===!0?"innerHTML":"textContent"]:M.value})]}function wt(){if(T.value===!0)return n["no-option"]!==void 0?n["no-option"]({inputValue:S.value}):void 0;const t=n.option!==void 0?n.option:c=>x(nn,{key:c.index,...c.itemProps},()=>x(ln,()=>x(cn,()=>x("span",{[c.html===!0?"innerHTML":"textContent"]:c.label}))));let s=J("div",$e.value.map(t));return n["before-options"]!==void 0&&(s=n["before-options"]().concat(s)),$l(n["after-options"],s)}function ml(t,s){const c=s===!0?{...De.value,...l.splitAttrs.attributes.value}:void 0,C={ref:s===!0?I:void 0,key:"i_t",class:r.value,style:e.inputStyle,value:S.value!==void 0?S.value:"",type:"search",...c,id:s===!0?l.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...sl.value};return t!==!0&&_===!0&&(Array.isArray(C.class)===!0?C.class=[...C.class,"no-pointer-events"]:C.class+=" no-pointer-events"),x("input",C)}function kt(t){h!==null&&(clearTimeout(h),h=null),k!==null&&(clearTimeout(k),k=null),!(t&&t.target&&t.target.qComposing===!0)&&(Ne(t.target.value||""),R=!0,$=S.value,l.focused.value!==!0&&(_!==!0||V.value===!0)&&l.focus(),e.onFilter!==void 0&&(h=setTimeout(()=>{h=null,pe(S.value)},e.inputDebounce)))}function Ne(t,s){S.value!==t&&(S.value=t,s===!0||e.inputDebounce===0||e.inputDebounce==="0"?o("inputValue",t):k=setTimeout(()=>{k=null,o("inputValue",t)},e.inputDebounce))}function Oe(t,s,c){R=c!==!0,e.useInput===!0&&(Ne(t,!0),(s===!0||c!==!0)&&($=t),s!==!0&&pe(t))}function pe(t,s,c){if(e.onFilter===void 0||s!==!0&&l.focused.value!==!0)return;l.innerLoading.value===!0?o("filterAbort"):(l.innerLoading.value=!0,f.value=!0),t!==""&&e.multiple!==!0&&a.value.length!==0&&R!==!0&&t===U.value(a.value[0])&&(t="");const C=setTimeout(()=>{i.value===!0&&(i.value=!1)},10);L!==null&&clearTimeout(L),L=C,o("filter",t,(z,A)=>{(s===!0||l.focused.value===!0)&&L===C&&(clearTimeout(L),typeof z=="function"&&z(),f.value=!1,de(()=>{l.innerLoading.value=!1,l.editable.value===!0&&(s===!0?i.value===!0&&he():i.value===!0?et(!0):i.value=!0),typeof A=="function"&&de(()=>{A(d)}),typeof c=="function"&&de(()=>{c(d)})}))},()=>{l.focused.value===!0&&L===C&&(clearTimeout(L),l.innerLoading.value=!1,f.value=!1),i.value===!0&&(i.value=!1)})}function gl(){return x(rn,{ref:K,class:v.value,style:e.popupContentStyle,modelValue:i.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&T.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:E.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:Ge.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...ve.value,onScrollPassive:Y,onBeforeShow:Ct,onBeforeHide:hl,onShow:Sl},wt)}function hl(t){qt(t),Ve()}function Sl(){le()}function yl(t){Te(t),I.value?.focus(),V.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function bl(t){Te(t),de(()=>{V.value=!1})}function wl(){const t=[x(sn,{class:`col-auto ${l.fieldClass.value}`,...w.value,for:l.targetUid.value,dark:E.value,square:!0,loading:f.value,itemAligned:!1,filled:!0,stackLabel:S.value.length!==0,...l.splitAttrs.listeners.value,onFocus:yl,onBlur:bl},{...n,rawControl:()=>l.getControl(!0),before:void 0,after:void 0})];return i.value===!0&&t.push(x("div",{ref:ee,class:v.value+" scroll",style:e.popupContentStyle,...ve.value,onClick:lt,onScrollPassive:Y},wt())),x(Sn,{ref:N,modelValue:b.value,position:e.useInput===!0?"top":void 0,transitionShow:j,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:Ct,onBeforeHide:kl,onHide:xl,onShow:Cl},()=>x("div",{class:"q-select__dialog"+(E.value===!0?" q-select__dialog--dark q-dark":"")+(V.value===!0?" q-select__dialog--focused":"")},t))}function kl(t){qt(t),N.value!==null&&N.value.__updateRefocusTarget(l.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),l.focused.value=!1}function xl(t){he(),l.focused.value===!1&&o("blur",t),Be()}function Cl(){const t=document.activeElement;(t===null||t.id!==l.targetUid.value)&&I.value!==null&&I.value!==t&&I.value.focus(),le()}function Ve(){b.value!==!0&&(y.value=-1,i.value===!0&&(i.value=!1),l.focused.value===!1&&(L!==null&&(clearTimeout(L),L=null),l.innerLoading.value===!0&&(o("filterAbort"),l.innerLoading.value=!1,f.value=!1)))}function Ee(t){l.editable.value===!0&&(_===!0?(l.onControlFocusin(t),b.value=!0,de(()=>{l.focus()})):l.focus(),e.onFilter!==void 0?pe(S.value):(T.value!==!0||n["no-option"]!==void 0)&&(i.value=!0))}function he(){b.value=!1,Ve()}function Be(){e.useInput===!0&&Oe(e.multiple!==!0&&e.fillInput===!0&&a.value.length!==0&&U.value(a.value[0])||"",!0,!0)}function et(t){let s=-1;if(t===!0){if(a.value.length!==0){const c=oe.value(a.value[0]);s=e.options.findIndex(C=>Le(oe.value(C),c))}W(s)}qe(s)}function ql(t,s){i.value===!0&&l.innerLoading.value===!1&&(W(-1,!0),de(()=>{i.value===!0&&l.innerLoading.value===!1&&(t>s?W():et(!0))}))}function xt(){b.value===!1&&K.value!==null&&K.value.updatePosition()}function Ct(t){t!==void 0&&Te(t),o("popupShow",t),l.hasPopupOpen=!0,l.onControlFocusin(t)}function qt(t){t!==void 0&&Te(t),o("popupHide",t),l.hasPopupOpen=!1,l.onControlFocusout(t)}function pt(){_=g.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?n["no-option"]!==void 0||e.onFilter!==void 0||T.value===!1:!0),j=g.platform.is.ios===!0&&_===!0&&e.useInput===!0?"fade":e.transitionShow}return Hl(pt),Rl(xt),pt(),Re(()=>{h!==null&&clearTimeout(h),k!==null&&clearTimeout(k)}),Object.assign(d,{showPopup:Ee,hidePopup:he,removeAtIndex:Je,add:vt,toggleOption:ge,getOptionIndex:()=>y.value,setOptionIndex:qe,moveOptionSelection:je,filter:pe,updateMenuPosition:xt,updateInputValue:Oe,isOptionSelected:Ze,getEmittingOptionValue:ft,isOptionDisabled:(...t)=>Ce.value.apply(null,t)===!0,getOptionValue:(...t)=>oe.value.apply(null,t),getOptionLabel:(...t)=>U.value.apply(null,t)}),Object.assign(l,{innerValue:a,fieldClass:m(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:ue,targetRef:I,hasValue:O,showPopup:Ee,floatingLabel:m(()=>e.hideSelected!==!0&&O.value===!0||typeof S.value=="number"||S.value.length!==0||Vt(e.displayValue)),getControlChild:()=>{if(l.editable.value!==!1&&(b.value===!0||T.value!==!0||n["no-option"]!==void 0))return _===!0?wl():gl();l.hasPopupOpen===!0&&(l.hasPopupOpen=!1)},controlEvents:{onFocusin(t){l.onControlFocusin(t)},onFocusout(t){l.onControlFocusout(t,()=>{Be(),Ve()})},onClick(t){if(lt(t),_!==!0&&i.value===!0){Ve(),I.value?.focus();return}Ee(t)}},getControl:t=>{const s=vl(),c=t===!0||b.value!==!0||_!==!0;if(e.useInput===!0)s.push(ml(t,c));else if(l.editable.value===!0){const z=c===!0?De.value:void 0;s.push(x("input",{ref:c===!0?I:void 0,key:"d_t",class:"q-select__focus-target",id:c===!0?l.targetUid.value:void 0,value:M.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...z,onKeydown:yt,onKeyup:gt,onKeypress:St})),c===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&s.push(x("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:ht}))}if(X.value!==void 0&&e.disable!==!0&&Ke.value.length!==0){const z=Ke.value.map(A=>x("option",{value:A,selected:!0}));s.push(x("select",{class:"hidden",name:X.value,multiple:e.multiple},z))}const C=e.useInput===!0||c!==!0?void 0:l.splitAttrs.attributes.value;return x("div",{class:"q-field__native row items-center",...C,...l.splitAttrs.listeners.value},s)},getInnerAppend:()=>e.loading!==!0&&f.value!==!0&&e.hideDropdownIcon!==!0?[x(Dl,{class:"q-select__dropdown-icon"+(i.value===!0?" rotate-180":""),name:ze.value})]:null}),Kt(l)}});export{rn as Q,nn as a,ln as b,An as c,Sn as d,cn as e,wn as f,Bn as g,Tn as h,Xe as r,It as u};

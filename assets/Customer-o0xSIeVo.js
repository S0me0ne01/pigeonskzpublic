import{Q as y,a as f,b as g,c as m}from"./QTable-C4lbgeAa.js";import{_ as x,C as k,D as l,E as o,I as s,F as t,G as n,H as b,L as _,K as r,J as B,ag as w,O as Q,P as T,Q as L}from"./index-CRjmpNU5.js";import{Q as P}from"./use-fullscreen-4kETz3cQ.js";import{Q as p}from"./QCard-Damqwcv1.js";import{Q as C}from"./QImg-KyN69tay.js";import{Q as q}from"./QCardSection-ZJ6s3IRn.js";import{Q as N}from"./QCardActions-BQkFRJYR.js";import{Q as S}from"./QPage-FIay8k12.js";import"./use-key-composition-DgF9N5-D.js";import"./use-dark-Tj2_Ryar.js";import"./QSeparator-C8TZrEx2.js";import"./QSelect-hEkC3g8O.js";import"./QChip-m1VxfLt2.js";import"./use-timeout-BbhxU0AJ.js";const D={data(){return{activeTab:"bids",activeBids:[{id:1,photo:"/pigeonskzpublic/images/pigeon.png",name:"MOONLIGHT",myBid:12e3,currentPrice:12e3,endDate:"2023-07-25T18:00:00"},{id:2,photo:"/pigeonskzpublic/images/pigeon.png",name:"FLYHIGH",myBid:8500,currentPrice:9e3,endDate:"2023-07-28T12:00:00"}],bidsColumns:[{name:"photo",label:"Фото и название",field:"photo",align:"left",sortable:!0},{name:"myBid",label:"Ваша ставка",field:"myBid",align:"center",sortable:!0},{name:"currentPrice",label:"Текущая цена",field:"currentPrice",align:"center",sortable:!0},{name:"endDate",label:"Дата окончания",field:"endDate",align:"center",sortable:!0}],wonLots:[{id:3,photo:"/pigeonskzpublic/images/pigeon.png",name:"BLUE LIGHTNING",finalPrice:15e3,paymentStatus:"оплачено"},{id:4,photo:"/pigeonskzpublic/images/pigeon.png",name:"GOLDEN WINGS",finalPrice:22e3,paymentStatus:"оплатить"}],wonColumns:[{name:"photo",label:"Фото и название",field:"photo",align:"left",sortable:!0},{name:"finalPrice",label:"Итоговая цена",field:"finalPrice",align:"center",sortable:!0},{name:"paymentStatus",label:"Статус оплаты",field:"paymentStatus",align:"center",sortable:!0}],favoriteLots:[{id:5,photo:"/pigeonskzpublic/images/pigeon.png",name:"RED BARON",currentPrice:18e3,auctionName:"Голубиный рай"},{id:6,photo:"/pigeonskzpublic/images/pigeon.png",name:"SILVER STORM",currentPrice:25e3,auctionName:"Элитные породы"}]}},methods:{formatTimeLeft(d){const u=new Date(d)-new Date;if(u<=0)return"Аукцион завершен";const a=Math.floor(u/(1e3*60*60*24)),c=Math.floor(u%(1e3*60*60*24)/(1e3*60*60));return`${a}д ${c}ч`},payForLot(d){this.$router.push(`/payment/${d.id}`)},goToLot(d){this.$router.push("/lot/")}},mounted(){this.timer=setInterval(()=>{this.activeBids=[...this.activeBids]},6e4)},beforeUnmount(){clearInterval(this.timer)}},I={class:"row q-mb-xl"},z={class:"tab-content"},V={key:0,class:"bids-section"},G={class:"row items-center"},E=["src"],O={key:1,class:"won-section"},F={class:"row items-center"},H=["src"],A={key:0,class:"text-positive"},M=["onClick"],R={key:2,class:"favorites-section"},U={class:"row q-col-gutter-md"},J={class:"text-h6 text-weight-bold"},K={class:"text-subtitle1 q-mt-sm"},W={class:"text-caption text-grey-7 q-mt-sm"};function Y(d,i,h,u,a,c){return l(),k(S,{class:"q-pa-lg"},{default:o(()=>[i[4]||(i[4]=s("div",{class:"row items-center q-mb-lg"},[s("div",{class:"text-h4 text-weight-bold"},"Личный кабинет покупателя"),s("div",{style:{"border-top":"2px solid #B84A2B","flex-grow":"1","margin-left":"20px"}})],-1)),s("div",I,[t(y,{modelValue:a.activeTab,"onUpdate:modelValue":i[0]||(i[0]=e=>a.activeTab=e),"inline-label":"","outside-arrows":"","mobile-arrows":""},{default:o(()=>[t(f,{name:"bids",label:"Мои ставки"}),t(f,{name:"won",label:"Выигранные лоты"}),t(f,{name:"favorites",label:"Избранное"})]),_:1},8,["modelValue"])]),s("div",z,[a.activeTab==="bids"?(l(),n("div",V,[t(p,{flat:"",bordered:"",class:"q-pa-md"},{default:o(()=>[i[1]||(i[1]=s("div",{class:"text-h5 q-mb-md"},"Активные лоты со ставками",-1)),t(g,{rows:a.activeBids,columns:a.bidsColumns,"row-key":"id",pagination:{rowsPerPage:10},flat:"",bordered:""},{"body-cell-photo":o(e=>[t(m,{props:e},{default:o(()=>[s("div",G,[t(w,{size:"50px",class:"q-mr-sm"},{default:o(()=>[s("img",{src:e.row.photo},null,8,E)]),_:2},1024),s("span",null,r(e.row.name),1)])]),_:2},1032,["props"])]),"body-cell-myBid":o(e=>[t(m,{props:e,class:B({"text-bold":e.row.myBid===e.row.currentPrice})},{default:o(()=>[_(r(e.row.myBid)+" ₸ ",1)]),_:2},1032,["props","class"])]),"body-cell-endDate":o(e=>[t(m,{props:e},{default:o(()=>[t(P,{color:"grey"},{default:o(()=>[_(r(c.formatTimeLeft(e.row.endDate)),1)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1,__:[1]})])):b("",!0),a.activeTab==="won"?(l(),n("div",O,[t(p,{flat:"",bordered:"",class:"q-pa-md"},{default:o(()=>[i[2]||(i[2]=s("div",{class:"text-h5 q-mb-md"},"Выигранные лоты",-1)),t(g,{rows:a.wonLots,columns:a.wonColumns,"row-key":"id",pagination:{rowsPerPage:10},flat:"",bordered:""},{"body-cell-photo":o(e=>[t(m,{props:e},{default:o(()=>[s("div",F,[t(w,{size:"50px",class:"q-mr-sm"},{default:o(()=>[s("img",{src:e.row.photo},null,8,H)]),_:2},1024),s("span",null,r(e.row.name),1)])]),_:2},1032,["props"])]),"body-cell-paymentStatus":o(e=>[t(m,{props:e},{default:o(()=>[e.row.paymentStatus==="оплачено"?(l(),n("span",A,r(e.row.paymentStatus),1)):(l(),n("span",{key:1,class:"text-negative cursor-pointer",onClick:v=>c.payForLot(e.row)},r(e.row.paymentStatus),9,M))]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1,__:[2]})])):b("",!0),a.activeTab==="favorites"?(l(),n("div",R,[t(p,{flat:"",bordered:"",class:"q-pa-md"},{default:o(()=>[i[3]||(i[3]=s("div",{class:"text-h5 q-mb-md"},"Избранные лоты",-1)),s("div",U,[(l(!0),n(Q,null,T(a.favoriteLots,e=>(l(),n("div",{key:e.id,class:"col-xs-12 col-sm-6 col-md-4"},[t(p,{flat:"",bordered:"",class:"lot-card",style:{"max-width":"280px"}},{default:o(()=>[t(C,{src:e.photo,ratio:4/3,fit:"contain"},null,8,["src"]),t(q,null,{default:o(()=>[s("div",J,r(e.name),1),s("div",K,r(e.currentPrice)+" ₸",1),s("div",W,r(e.auctionName),1)]),_:2},1024),t(N,null,{default:o(()=>[t(L,{color:"primary",label:"Перейти к лоту",onClick:v=>c.goToLot(e.id),class:"full-width"},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))])]),_:1,__:[3]})])):b("",!0)])]),_:1,__:[4]})}const ce=x(D,[["render",Y]]);export{ce as default};
